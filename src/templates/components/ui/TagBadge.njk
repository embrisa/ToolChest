{#
  TagBadge Component
  
  Purpose: Colored category/status indicators with customizable styling
  
  Props:
  - name (string, required): Tag display text
  - color (string, default: '#6B7280'): Hex color for styling
  - size ('sm' | 'md' | 'lg', default: 'md'): Badge size variant
  - variant ('colored' | 'neutral' | 'outline', default: 'colored'): Badge style variant
  - href (string, optional): Make badge clickable
  - removable (boolean, default: false): Add remove button
  - onRemove (string, optional): JavaScript function name for remove action
  - containerClass (string, optional): Additional CSS classes
  
  Usage:
  {{ TagBadge(name='Encoding', color='#6B7280') }}
  {{ TagBadge(name='Popular', color='#059669', size='lg', variant='colored') }}
  {{ TagBadge(name='Category', href='/category/tools', size='sm') }}
#}

{% macro TagBadge(name, color='#6B7280', size='md', variant='colored', href='', removable=false, onRemove='', containerClass='') %}
  {% set baseClasses = 'tag-badge tag-badge-' + variant + ' tag-badge-' + size %}
  
  {# Size-specific classes #}
  {% if size == 'sm' %}
    {% set sizeClasses = 'px-2 py-1 text-xs' %}
    {% set iconClasses = 'text-xs ml-1' %}
  {% elif size == 'lg' %}
    {% set sizeClasses = 'px-4 py-2 text-sm' %}
    {% set iconClasses = 'text-sm ml-2' %}
  {% else %}
    {% set sizeClasses = 'px-3 py-1 text-xs' %}
    {% set iconClasses = 'text-xs ml-1' %}
  {% endif %}
  
  {# Variant-specific styling #}
  {% if variant == 'colored' %}
    {% set variantClasses = 'inline-flex items-center font-medium rounded-full transition-all duration-200' %}
    {% set colorStyles = 'style="background-color: ' + color + '20; color: ' + color + '; border: 1px solid ' + color + '30;"' %}
  {% elif variant == 'outline' %}
    {% set variantClasses = 'inline-flex items-center font-medium rounded-full border-2 bg-transparent transition-all duration-200' %}
    {% set colorStyles = 'style="color: ' + color + '; border-color: ' + color + '60;"' %}
  {% else %}
    {# Neutral variant #}
    {% set variantClasses = 'inline-flex items-center font-medium rounded-full bg-neutral-700/20 text-neutral-300 border border-neutral-600/30 transition-all duration-200' %}
    {% set colorStyles = '' %}
  {% endif %}
  
  {# Hover effects for clickable badges #}
  {% if href %}
    {% set hoverClasses = 'hover:scale-105 hover:shadow-md cursor-pointer' %}
    {% if variant == 'colored' %}
      {% set hoverStyles = 'onmouseover="this.style.backgroundColor=\'' + color + '30\'" onmouseout="this.style.backgroundColor=\'' + color + '20\'"' %}
    {% endif %}
  {% else %}
    {% set hoverClasses = '' %}
    {% set hoverStyles = '' %}
  {% endif %}

  {% set element = 'a' if href else 'span' %}
  {% set hrefAttr = 'href="' + href + '"' if href else '' %}

  <{{ element }} {{ hrefAttr }} 
    class="{{ baseClasses }} {{ variantClasses }} {{ sizeClasses }} {{ hoverClasses }} {{ containerClass }}" 
    {{ colorStyles | safe }} 
    {{ hoverStyles | safe }}>
    <span>{{ name }}</span>
    
    {% if removable and onRemove %}
      <button 
        type="button" 
        onclick="{{ onRemove }}('{{ name }}')" 
        class="{{ iconClasses }} hover:text-red-400 transition-colors duration-200 focus:outline-none"
        aria-label="Remove {{ name }} tag">
        <i class="fas fa-times"></i>
      </button>
    {% endif %}
  </{{ element }}>
{% endmacro %}

{#
  TagBadgeList Component
  
  Container for multiple tag badges with consistent spacing
  
  Props:
  - tags (array, required): Array of tag objects with name and color
  - size ('sm' | 'md' | 'lg', default: 'md'): Badge size for all tags
  - variant ('colored' | 'neutral' | 'outline', default: 'colored'): Badge variant
  - removable (boolean, default: false): Make tags removable
  - onRemove (string, optional): JavaScript function for remove action
  - limit (number, optional): Maximum number of tags to show
  - showMore (boolean, default: true): Show "+X more" indicator when limited
  - containerClass (string, optional): Additional CSS classes
  
  Usage:
  {{ TagBadgeList(tags=[
    {name: 'Encoding', color: '#6B7280'},
    {name: 'Utility', color: '#059669'}
  ]) }}
#}

{% macro TagBadgeList(tags, size='md', variant='colored', removable=false, onRemove='', limit=0, showMore=true, containerClass='') %}
  {% if tags and tags|length > 0 %}
    {% set gapClass = 'gap-1' if size == 'sm' else 'gap-2' %}
    
    <div class="tag-badge-list flex flex-wrap {{ gapClass }} {{ containerClass }}">
      {% set displayTags = tags[:limit] if limit > 0 else tags %}
      
      {% for tag in displayTags %}
        {{ TagBadge(
          name=tag.name,
          color=tag.color or '#6B7280',
          size=size,
          variant=variant,
          href=tag.href or '',
          removable=removable,
          onRemove=onRemove
        ) }}
      {% endfor %}
      
      {# Show "more" indicator if limited #}
      {% if limit > 0 and tags|length > limit and showMore %}
        {% set remainingCount = tags|length - limit %}
        {% if size == 'sm' %}
          {% set moreSizeClasses = 'px-2 py-1 text-xs' %}
        {% elif size == 'lg' %}
          {% set moreSizeClasses = 'px-4 py-2 text-sm' %}
        {% else %}
          {% set moreSizeClasses = 'px-3 py-1 text-xs' %}
        {% endif %}
        <span class="tag-badge tag-badge-neutral tag-badge-{{ size }} inline-flex items-center font-medium rounded-full bg-neutral-700/20 text-neutral-400 border border-neutral-600/20 {{ moreSizeClasses }}">
          +{{ remainingCount }} more
        </span>
      {% endif %}
    </div>
  {% endif %}
{% endmacro %}

{#
  StatusBadge Component
  
  Specialized badge for status indicators with predefined color schemes
  
  Props:
  - status ('success' | 'warning' | 'error' | 'info' | 'pending', required): Status type
  - text (string, optional): Custom text, defaults to status name
  - size ('sm' | 'md' | 'lg', default: 'md'): Badge size
  - withIcon (boolean, default: true): Include status icon
  - containerClass (string, optional): Additional CSS classes
#}

{% macro StatusBadge(status, text='', size='md', withIcon=true, containerClass='') %}
  {% set statusText = text or status|title %}
  
  {# Status-specific colors and icons #}
  {% if status == 'success' %}
    {% set color = '#059669' %}
    {% set icon = 'fas fa-check-circle' %}
  {% elif status == 'warning' %}
    {% set color = '#D97706' %}
    {% set icon = 'fas fa-exclamation-triangle' %}
  {% elif status == 'error' %}
    {% set color = '#DC2626' %}
    {% set icon = 'fas fa-times-circle' %}
  {% elif status == 'info' %}
    {% set color = '#2563EB' %}
    {% set icon = 'fas fa-info-circle' %}
  {% elif status == 'pending' %}
    {% set color = '#6B7280' %}
    {% set icon = 'fas fa-clock' %}
  {% else %}
    {% set color = '#6B7280' %}
    {% set icon = 'fas fa-circle' %}
  {% endif %}
  
  {% if size == 'sm' %}
    {% set sizeClasses = 'px-2 py-1 text-xs' %}
    {% set iconSize = 'text-xs' %}
  {% elif size == 'lg' %}
    {% set sizeClasses = 'px-4 py-2 text-sm' %}
    {% set iconSize = 'text-sm' %}
  {% else %}
    {% set sizeClasses = 'px-3 py-1 text-xs' %}
    {% set iconSize = 'text-xs' %}
  {% endif %}

  <span class="status-badge status-badge-{{ status }} inline-flex items-center font-medium rounded-full transition-all duration-200 {{ sizeClasses }} {{ containerClass }}"
        style="background-color: {{ color }}20; color: {{ color }}; border: 1px solid {{ color }}30;">
    {% if withIcon %}
      <i class="{{ icon }} {{ iconSize }} mr-1"></i>
    {% endif %}
    <span>{{ statusText }}</span>
  </span>
{% endmacro %} 