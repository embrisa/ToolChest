{#
  IconContainer Component
  Purpose: Styled icon backgrounds with consistent sizing and Apple-inspired gradients
  
  Props:
  - size: 'sm' | 'md' | 'lg' | 'xl' | '2xl' (default: 'md')
  - icon: string (FontAwesome class, required)
  - variant: 'sand' | 'apple-blue' | 'sunset' | 'neutral' | 'gradient' (default: 'sand')
  - rounded: 'lg' | 'xl' | '2xl' | '3xl' (default: '2xl')
  - className: string (additional CSS classes)
  - href: string (optional, makes container a link)
#}

{% macro IconContainer(
  size='md',
  icon='fas fa-toolbox',
  variant='sand',
  rounded='2xl',
  className='',
  href=''
) %}

{# Size definitions #}
{% set sizeClasses = {
  'sm': 'w-8 h-8',
  'md': 'w-12 h-12',
  'lg': 'w-16 h-16',
  'xl': 'w-20 h-20',
  '2xl': 'w-24 h-24'
} %}

{# Icon size classes based on container size #}
{% set iconSizes = {
  'sm': 'text-sm',
  'md': 'text-base',
  'lg': 'text-xl',
  'xl': 'text-2xl',
  '2xl': 'text-3xl'
} %}

{# Rounded classes #}
{% set roundedClasses = {
  'lg': 'rounded-lg',
  'xl': 'rounded-xl',
  '2xl': 'rounded-2xl',
  '3xl': 'rounded-3xl'
} %}

{# Variant styling with glass morphism support #}
{% set variantClasses = {
  'sand': 'glass-light',
  'apple-blue': 'glass-light',
  'sunset': 'glass-light',
  'neutral': 'glass-light',
  'gradient': 'glass-light'
} %}

{# Variant CSS variables for glass morphism #}
{% set variantStyles = {
  'sand': '--glass-bg: rgba(249, 200, 150, 0.15); --glass-border: rgba(249, 200, 150, 0.2);',
  'apple-blue': '--glass-bg: rgba(0, 122, 255, 0.1); --glass-border: rgba(0, 122, 255, 0.15);',
  'sunset': '--glass-bg: rgba(255, 140, 66, 0.12); --glass-border: rgba(255, 140, 66, 0.18);',
  'neutral': '--glass-bg: rgba(120, 113, 108, 0.08); --glass-border: rgba(120, 113, 108, 0.12);',
  'gradient': '--glass-bg: linear-gradient(135deg, rgba(252, 211, 77, 0.15) 0%, rgba(245, 168, 103, 0.15) 50%, rgba(51, 141, 255, 0.1) 100%); --glass-border: rgba(245, 168, 103, 0.2);'
} %}

{# Icon color based on variant #}
{% set iconColors = {
  'sand': 'text-sand-600',
  'apple-blue': 'text-blue-600',
  'sunset': 'text-sunset-600',
  'neutral': 'text-neutral-600',
  'gradient': 'text-sand-600'
} %}

{# Build CSS classes #}
{% set classes = [
  sizeClasses[size],
  roundedClasses[rounded],
  variantClasses[variant],
  'flex items-center justify-center',
  'transition-all duration-300 ease-out'
] %}

{% if className %}
  {% set classes = classes + [className] %}
{% endif %}

{# Container element (div or a) #}
{% set tagName = 'a' if href else 'div' %}

<{{ tagName }}
  {% if href %}href="{{ href }}"{% endif %}
  class="{{ classes | join(' ') }} {% if href %}hover:scale-105 cursor-pointer{% endif %}"
  style="{{ variantStyles[variant] }}">
  <i class="{{ icon }} {{ iconSizes[size] }} {{ iconColors[variant] }}"></i>
</{{ tagName }}>

{% endmacro %}

{#
  Icon with Text - Combines icon container with text label
#}
{% macro IconWithText(
  size='md',
  icon='fas fa-toolbox',
  variant='sand',
  text='',
  textSize='sm',
  direction='vertical',
  className='',
  href=''
) %}

{% set containerClasses = ['flex items-center'] %}
{% if direction == 'vertical' %}
  {% set containerClasses = containerClasses + ['flex-col', 'space-y-2'] %}
{% else %}
  {% set containerClasses = containerClasses + ['space-x-3'] %}
{% endif %}

{% if className %}
  {% set containerClasses = containerClasses + [className] %}
{% endif %}

{% set textSizeClasses = {
  'xs': 'text-xs',
  'sm': 'text-sm', 
  'base': 'text-base',
  'lg': 'text-lg'
} %}

<div class="{{ containerClasses | join(' ') }}">
  {{ IconContainer(size=size, icon=icon, variant=variant, href=href) }}
  {% if text %}
    <span class="{{ textSizeClasses[textSize] }} text-neutral-600 font-medium">{{ text }}</span>
  {% endif %}
</div>

{% endmacro %} 