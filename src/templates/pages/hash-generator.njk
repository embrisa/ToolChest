{% extends "layouts/base.njk" %}

{% block content %}
<header class="mb-8 text-center">
    <h1 class="text-4xl font-bold text-sand-100">{{ title }}</h1>
    <p class="text-lg text-neutral-300">{{ description }}</p>
</header>

{% if errorMessage %}
    <div class="bg-error/20 border border-error text-error px-4 py-3 rounded relative mb-4 max-w-md mx-auto" role="alert">
        <strong class="font-bold">Error:</strong>
        <span class="block sm:inline">{{ errorMessage }}</span>
    </div>
{% endif %}

<form hx-post="/hash-generator/generate" hx-target="#hash-result-container" hx-swap="innerHTML"
      hx-encoding="multipart/form-data" class="tool-card p-6 rounded-lg max-w-lg mx-auto shadow-lg">

    <div class="form-field">
        <label for="algorithm" class="form-label">Algorithm</label>
        <select name="algorithm" id="algorithm" required class="form-input">
            {% for algo in algorithms %}
            <option value="{{ algo }}" {% if algo === 'sha256' %}selected{% endif %}>{{ algo | upper }}</option>
            {% endfor %}
        </select>
    </div>

    <div class="form-field">
        <label for="inputText" class="form-label">Text Input</label>
        <textarea name="inputText" id="inputText" rows="4" class="form-textarea"
                 placeholder="Enter text here or upload a file below"></textarea>
    </div>

    <div class="form-field">
        <label for="inputFile" class="form-label">Or Upload File</label>
        <input type="file" name="inputFile" id="inputFile" class="form-input">
        <p class="mt-1 text-xs text-neutral-400">Max file size: 10MB.</p>
    </div>

    <div class="text-center">
        <button type="submit" class="btn btn-primary px-6 py-2.5 text-sm relative">
            Generate Hash
            <span class="htmx-indicator absolute inset-0 flex items-center justify-center bg-inherit">
                <i class="fas fa-spinner fa-spin"></i>
            </span>
        </button>
    </div>
</form>

<div id="hash-result-container" class="mt-10">
    {% if result %}
        {% include "pages/hash-result.njk" %}
    {% endif %}
</div>
{% endblock %} 