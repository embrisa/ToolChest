{% extends "layouts/base.njk" %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    <header class="mb-8 text-center">
        <h1 class="text-4xl font-bold text-white">{{ title }}</h1>
        <p class="text-lg text-gray-400">{{ description }}</p>
    </header>

    {% if errorMessage %}
        <div class="bg-danger/20 border border-danger text-danger px-4 py-3 rounded relative mb-4 max-w-md mx-auto" role="alert">
            <strong class="font-bold">Error:</strong>
            <span class="block sm:inline">{{ errorMessage }}</span>
        </div>
    {% endif %}

    <form hx-post="/hash-generator/generate" hx-target="#hash-result-container" hx-swap="innerHTML"
          hx-encoding="multipart/form-data" class="bg-white/10 p-6 rounded-lg shadow-xl max-w-lg mx-auto">

        <div class="mb-4">
            <label for="algorithm" class="block text-sm font-medium text-gray-300 mb-1">Algorithm</label>
            <select name="algorithm" id="algorithm" required
                    class="block w-full bg-navy-900/70 border-gray-700 text-gray-200 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-ocean-400 focus:border-ocean-400 sm:text-sm">
                {% for algo in algorithms %}
                <option value="{{ algo }}" {% if algo === 'sha256' %}selected{% endif %}>{{ algo | upper }}</option>
                {% endfor %}
            </select>
        </div>

        <div class="mb-4">
            <label for="inputText" class="block text-sm font-medium text-gray-300 mb-1">Text Input</label>
            <textarea name="inputText" id="inputText" rows="4"
                     class="block w-full bg-navy-900/70 border-gray-700 text-gray-200 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-ocean-400 focus:border-ocean-400 sm:text-sm"
                     placeholder="Enter text here or upload a file below"></textarea>
        </div>

        <div class="mb-6">
            <label for="inputFile" class="block text-sm font-medium text-gray-300 mb-1">Or Upload File</label>
            <input type="file" name="inputFile" id="inputFile"
                  class="block w-full text-sm text-gray-400 file:mr-4 file:py-2 file:px-4
                          file:rounded-full file:border-0 file:text-sm file:font-semibold
                          file:bg-ocean-700/30 file:text-ocean-100 hover:file:bg-ocean-700/50
                          focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-ocean-400 focus:ring-offset-navy-900">
            <p class="mt-1 text-xs text-gray-500">Max file size: 10MB.</p>
        </div>

        <div class="text-center">
            <button type="submit" class="btn-primary px-6 py-2.5 text-sm">
                Generate Hash
                <span class="htmx-indicator inline-block ml-2">
                    <i class="fas fa-spinner fa-spin"></i>
                </span>
            </button>
        </div>
    </form>

    <div id="hash-result-container" class="mt-10">
        {% if result %}
            {% include "pages/hash-result.njk" %}
        {% endif %}
    </div>
</div>
{% endblock %} 